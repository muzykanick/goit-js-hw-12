{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nasync function getInfo(str, page) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '43485677-c4ca6985f0e2cabeed805eb30';\n    \n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: str,\n        image_typ: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: 15,\n    });\n\n    const { data } = await axios.get(`${BASE_URL}?${params}`);\n    return data;\n\n}\nexport { getInfo };\n","export function createMarkup(arr) {\n  return arr\n    .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n      <div class=\"gallery\">\n       <a class=\"gallery-link\" href=\"${largeImageURL}\">\n       <img class=\"gallery-image\"\n         src=\"${webformatURL}\"\n         alt=\"${tags}\"\n        />\n       </a>\n       \n      <ul class=\"card-description\">\n        <li class=\"description\">Likes <span class=\"accent\">${likes} </span></li>\n        <li class=\"description\">Views <span class=\"accent\">${views} </span></li>\n        <li class=\"description\">Comments <span class=\"accent\">${comments} </span></li>\n        <li class=\"description\">Downloads <span class=\"accent\">${downloads} </span></li>\n      </ul>\n      </div>\n    </li>\n    `).join(\"\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getInfo } from \"./js/pixabay-api.js\";\nimport { createMarkup } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".search-form \");\nconst list = document.querySelector(\".js-list\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreButton = document.querySelector(\".load-more-button\");\n\nform.addEventListener(\"submit\", searchImages);\nloadMoreButton.addEventListener(\"click\", loadMore);\n\nfunction loaderShow() {\n    loader.classList.toggle(\"visible\");\n}\n\nfunction showLoadMoreButton(isVisible) {\n    if (isVisible) {\n        loadMoreButton.classList.add(\"visible-button\");\n    } else {\n        loadMoreButton.classList.remove(\"visible-button\");\n    }\n}\n\nconst lightbox = new SimpleLightbox('.images a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\n\nlet searchQuery = \"\";\nlet page = 1;\nlet totalPages = 0;\n\n\n\n\nasync function searchImages(event) {\n    event.preventDefault();\n    list.innerHTML = \"\";  \n    page = 1; \n\n    const { query } = event.currentTarget.elements;\n    searchQuery = query.value.trim();\n\n    if (searchQuery === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'The field cannot be empty!!!',\n            position: 'topRight',\n        });\n        return;\n    };\n\n    loaderShow();\n\n    try {\n        const data = await getInfo(searchQuery, page);\n        if (data.hits.length === 0) {\n            iziToast.warning({\n                title: '',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            showLoadMoreButton(false);  \n            return;\n        }\n        list.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n        lightbox.refresh();\n        totalPages = Math.ceil(data.totalHits / 15);\n        showLoadMoreButton(page < totalPages); \n        form.reset();\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching data. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        loaderShow();\n    }\n}\n\nasync function loadMore() {\n    page += 1;\n    loaderShow();\n\n    try {\n        const data = await getInfo(searchQuery, page);\n        list.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n        lightbox.refresh();\n\n        if (page === totalPages) {\n            showLoadMoreButton(false);  \n            iziToast.info({\n                title: '',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'bottomRight',\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching data. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        loaderShow();\n    }\n}\n\n\n\n"],"names":["getInfo","str","page","BASE_URL","API_KEY","params","data","axios","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","list","loader","loadMoreButton","searchImages","loadMore","loaderShow","showLoadMoreButton","isVisible","lightbox","SimpleLightbox","searchQuery","totalPages","event","query","iziToast"],"mappings":"owBAGA,eAAeA,EAAQC,EAAKC,EAAM,CAC9B,MAAMC,EAAW,2BACXC,EAAU,qCAGVC,EAAS,IAAI,gBAAgB,CAC/B,IAAKD,EACL,EAAGH,EACH,UAAW,QACX,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EAClB,CAAK,EAEK,CAAE,KAAAI,CAAI,EAAK,MAAMC,EAAM,IAAI,GAAGJ,CAAQ,IAAIE,CAAM,EAAE,EACxD,OAAOC,CAEX,CCrBO,SAASE,EAAaC,EAAK,CAChC,OAAOA,EACJ,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA;AAAA,uCAGhDL,CAAa;AAAA;AAAA,gBAEpCD,CAAY;AAAA,gBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,6DAKyCC,CAAK;AAAA,6DACLC,CAAK;AAAA,gEACFC,CAAQ;AAAA,iEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAIrE,EAAE,KAAK,EAAE,CACd,CCZA,MAAMC,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,mBAAmB,EAEjEH,EAAK,iBAAiB,SAAUI,CAAY,EAC5CD,EAAe,iBAAiB,QAASE,CAAQ,EAEjD,SAASC,GAAa,CAClBJ,EAAO,UAAU,OAAO,SAAS,CACrC,CAEA,SAASK,EAAmBC,EAAW,CAC/BA,EACAL,EAAe,UAAU,IAAI,gBAAgB,EAE7CA,EAAe,UAAU,OAAO,gBAAgB,CAExD,CAEA,MAAMM,EAAW,IAAIC,EAAe,YAAa,CAC7C,aAAc,MACd,aAAc,GAClB,CAAC,EAGD,IAAIC,EAAc,GACd1B,EAAO,EACP2B,EAAa,EAKjB,eAAeR,EAAaS,EAAO,CAC/BA,EAAM,eAAc,EACpBZ,EAAK,UAAY,GACjBhB,EAAO,EAEP,KAAM,CAAE,MAAA6B,CAAO,EAAGD,EAAM,cAAc,SAGtC,GAFAF,EAAcG,EAAM,MAAM,OAEtBH,IAAgB,GAAI,CACpBI,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACT,SAAU,UACtB,CAAS,EACD,MAER,CACIT,IAEA,GAAI,CACA,MAAMjB,EAAO,MAAMN,EAAQ4B,EAAa1B,CAAI,EAC5C,GAAII,EAAK,KAAK,SAAW,EAAG,CACxB0B,EAAS,QAAQ,CACb,MAAO,GACP,QAAS,2EACT,SAAU,UAC1B,CAAa,EACDR,EAAmB,EAAK,EACxB,MACH,CACDN,EAAK,mBAAmB,YAAaV,EAAaF,EAAK,IAAI,CAAC,EAC5DoB,EAAS,QAAO,EAChBG,EAAa,KAAK,KAAKvB,EAAK,UAAY,EAAE,EAC1CkB,EAAmBtB,EAAO2B,CAAU,EACpCZ,EAAK,MAAK,CACb,MAAe,CACZe,EAAS,MAAM,CACX,MAAO,QACP,QAAS,iEACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNT,GACH,CACL,CAEA,eAAeD,GAAW,CACtBpB,GAAQ,EACRqB,IAEA,GAAI,CACA,MAAMjB,EAAO,MAAMN,EAAQ4B,EAAa1B,CAAI,EAC5CgB,EAAK,mBAAmB,YAAaV,EAAaF,EAAK,IAAI,CAAC,EAC5DoB,EAAS,QAAO,EAEZxB,IAAS2B,IACTL,EAAmB,EAAK,EACxBQ,EAAS,KAAK,CACV,MAAO,GACP,QAAS,6DACT,SAAU,aAC1B,CAAa,EAER,MAAe,CACZA,EAAS,MAAM,CACX,MAAO,QACP,QAAS,iEACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNT,GACH,CACL"}